@if (movies().length == moviesList.data.length) {

<mat-form-field
    appearance="outline"
>
  <mat-label>Trouver un film</mat-label>
  <input matInput
    (keyup)="searchMovie($event)"
    placeholder="Ex. Star Wars"
    #input>
</mat-form-field>

<div>
  <table mat-table [dataSource]="moviesList" matSort>
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Titre </th>
      <td mat-cell *matCellDef="let movie"> {{ movie.title }} </td>
    </ng-container>

    <ng-container matColumnDef="director">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Rèalistateur </th>
      <td mat-cell *matCellDef="let movie"> {{ movie.director }} </td>
    </ng-container>

    <ng-container matColumnDef="manage">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Manage </th>
      <td mat-cell *matCellDef="let movie">
        <button
          mat-raised-button
          color="warn"
          (click)="showModalDelete(movie.id)"
        >
          Supprimer
        </button>
        <button
          mat-raised-button
          (click)="showModalUpdate(movie)"
        >
          Modifier
        </button>
        <button mat-raised-button
          (click)="showModalCategories(movie)"
        >
          Catègories
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
    <tr mat-row *matRowDef="let row; columns:displayColumns"></tr>

  </table>
  <mat-paginator
    [pageSizeOptions]="[ 10, 20]"
    [pageSize]="20"
    [showFirstLastButtons]="true"
    panelClass="pagination">
  </mat-paginator>
</div>
}

@if (modalDeleteIsVisible()){
<app-modal-delete
  [(isVisible)]="modalDeleteIsVisible"
  (acceptRemoveItem)="deleteMovie($event)"/>
}

@if (modalUpdateIsVisible()){
<app-modal-update
  [(isVisible)]="modalUpdateIsVisible"
  [entity]="movie()"
  [formGroup]="formGroup"
  (updateData)="updateMovie($event)"
/>
}

@if (modalCategoriesIsVisible()) {
<app-modal-update-category
  [(isVisible)]="modalCategoriesIsVisible"
  [entity]="categories()"
  (checkedOrNotCategory)="updateCategoryMovie($event)"
/>
}
